<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Grabadora Pro</title>
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='14' ry='14' fill='%235647f5'/%3E%3Cpath d='M18 32a14 14 0 1028 0 14 14 0 00-28 0zm14-10a10 10 0 11-10 10 10 10 0 0110-10zm-2 6v8l8-4-8-4z' fill='%23fff'/%3E%3C/svg%3E"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="app-bar">
      <div class="brand">
        <span class="brand-mark" aria-hidden="true">üéôÔ∏è</span>
        <span class="brand-name">Grabadora Pro</span>
      </div>
      <nav class="app-nav" aria-label="Navegaci√≥n principal">
        <button type="button" class="nav-link is-active" data-section-toggle="home" aria-current="page">Inicio</button>
        <button type="button" class="nav-link" data-section-toggle="library">Biblioteca</button>
        <button type="button" class="nav-link" data-section-toggle="live">En vivo</button>
        <button type="button" class="nav-link" data-section-toggle="benefits">Beneficios</button>
      </nav>
      <button id="google-login" type="button" class="google-btn">
        <span class="icon">üîê</span>
        Iniciar sesi√≥n con Google
      </button>
    </header>

    <main class="layout">
      <section class="main-section is-active" data-section="home">
        <section class="hero" id="upload">
          <div class="hero-content">
            <h1>Transcribe sin complicaciones</h1>
            <p>
              Sube tus clases, pr√°cticas o notas de voz y sigue la transcripci√≥n en vivo mientras trabajamos por ti.
            </p>
            <div class="hero-tags">
              <span>WhisperX optimizado</span>
              <span>Carpetas autom√°ticas</span>
              <span>Streaming en tiempo real</span>
            </div>
          </div>
          <div class="hero-visual" aria-hidden="true">
            <div class="wave"></div>
            <div class="wave"></div>
            <div class="wave"></div>
          </div>
        </section>

        <div class="home-dashboard">
          <section class="card home-pending-card" aria-labelledby="home-pending-heading">
            <div class="card-header">
              <h2 id="home-pending-heading">Tareas pendientes</h2>
              <p class="section-lead">Controla las transcripciones en curso y salta a la biblioteca cuando necesites m√°s detalle.</p>
            </div>
            <div class="home-pending-meta">
              <span id="home-pending-count" class="badge badge-soft" aria-live="polite">Sin tareas en curso</span>
              <button type="button" class="ghost" data-section-jump="library">Abrir cola completa</button>
            </div>
            <p id="home-pending-empty" class="home-pending-empty">No tienes transcripciones proces√°ndose ahora mismo.</p>
            <ul id="home-pending-list" class="home-pending-list" hidden aria-live="polite"></ul>
          </section>

          <div class="home-columns">
            <section class="card upload-card" aria-labelledby="upload-heading">
              <div class="card-header">
                <h2 id="upload-heading">Transcripci√≥n r√°pida</h2>
                <p class="section-lead">
                  Elige tus archivos, selecciona la carpeta de destino y deja que la app haga el resto.
                </p>
              </div>
              <form id="upload-form" class="upload-form">
                <div class="file-picker">
                  <input
                    id="audio-file"
                    type="file"
                    accept="audio/*,video/*"
                    multiple
                    hidden
                  />
                  <label for="audio-file" class="file-trigger" role="button" tabindex="0">
                    <span class="file-trigger__pulse"></span>
                    <span class="file-trigger__pulse"></span>
                    <span class="icon">üìÅ</span>
                    <span class="text">Elegir archivos</span>
                  </label>
                  <p class="hint">Formatos compatibles: mp3, wav, m4a, mp4, webm y m√°s.</p>
                </div>
                <div id="file-preview" class="file-preview" hidden></div>
                <div id="file-error" class="form-error" hidden></div>

                <div class="field">
                  <label class="form-label" for="destination-folder">Carpeta destino</label>
                  <input
                    id="destination-folder"
                    type="text"
                    name="destination_folder"
                    placeholder="Ej: clase-historia"
                    list="destination-folder-options"
                    required
                  />
                  <datalist id="destination-folder-options"></datalist>
                </div>

                <details class="advanced-options">
                  <summary>Opciones avanzadas</summary>
                  <div class="form-grid">
                    <div class="field">
                      <label class="form-label" for="language">Idioma preferido</label>
                      <select id="language" name="language">
                        <option value="">Detecci√≥n autom√°tica</option>
                        <option value="es" selected>Espa√±ol</option>
                        <option value="en">Ingl√©s</option>
                        <option value="fr">Franc√©s</option>
                      </select>
                    </div>

                    <div class="field">
                      <label class="form-label" for="model-size">Modelo WhisperX</label>
                      <select id="model-size" name="model_size" data-default="large-v3">
                        <option value="large-v3" selected>large-v3 (m√°xima precisi√≥n)</option>
                        <option value="large-v2">large-v2 (estable)</option>
                        <option value="medium">medium (equilibrado)</option>
                        <option value="small">small (m√°s veloz)</option>
                      </select>
                    </div>

                    <div class="field">
                      <label class="form-label" for="device-preference">Dispositivo preferido</label>
                      <select id="device-preference" name="device_preference" data-default="gpu">
                        <option value="gpu" selected>GPU / CUDA (recomendado)</option>
                        <option value="cpu">CPU</option>
                      </select>
                    </div>
                  </div>
                </details>

                <div class="live-inline-hint" id="destination-saved-hint" hidden>
                  <span class="icon">üíæ</span>
                  <span>Guardando √∫ltima carpeta usada‚Ä¶</span>
                </div>

                <button type="submit" class="primary upload-button">
                  <span class="glow"></span>
                  <span class="label">Subir y transcribir</span>
                </button>
              </form>
              <div class="upload-feedback">
                <div id="upload-progress" class="progress-track" hidden>
                  <div class="progress-bar"></div>
                </div>
                <div id="upload-status" class="upload-status" aria-live="polite"></div>
              </div>
            </section>

            <section class="card live-stream-card" aria-labelledby="live-stream-heading">
              <div class="card-header">
                <h2 id="live-stream-heading">Transcripci√≥n en l√≠nea</h2>
                <p class="section-lead">Graba con tu micr√≥fono, conserva el audio y obt√©n subt√≠tulos mientras hablas.</p>
              </div>

              <div class="live-stream-wrapper">
                <div class="live-stream-config">
                  <div class="live-stream-controls">
                    <div class="field">
                      <label class="form-label" for="live-language">Idioma</label>
                      <select id="live-language" name="live_language">
                        <option value="">Detecci√≥n autom√°tica</option>
                        <option value="es" selected>Espa√±ol</option>
                        <option value="en">Ingl√©s</option>
                        <option value="fr">Franc√©s</option>
                      </select>
                    </div>

                    <div class="field">
                      <label class="form-label" for="live-model">Modelo</label>
                      <select id="live-model" name="live_model" data-default="large-v3">
                        <option value="large-v3" selected>large-v3</option>
                        <option value="large-v2">large-v2</option>
                        <option value="medium">medium</option>
                        <option value="small">small</option>
                      </select>
                    </div>

                    <div class="field">
                      <label class="form-label" for="live-device">Dispositivo</label>
                      <select id="live-device" name="live_device" data-default="gpu">
                        <option value="gpu" selected>GPU / CUDA</option>
                        <option value="cpu">CPU</option>
                      </select>
                    </div>

                    <div class="field">
                      <label class="form-label" for="live-folder">Carpeta destino</label>
                      <input
                        id="live-folder"
                        type="text"
                        name="live_folder"
                        placeholder="Ej: clases-en-vivo"
                        list="destination-folder-options"
                      />
                    </div>

                    <div class="field">
                      <label class="form-label" for="live-subject">Temario / notas</label>
                      <input
                        id="live-subject"
                        type="text"
                        name="live_subject"
                        placeholder="Tema, pr√°ctica, teor√≠a‚Ä¶"
                      />
                    </div>
                  </div>

                  <div class="live-stream-actions">
                    <button type="button" id="live-start" class="primary">
                      <span class="icon">üéôÔ∏è</span>
                      <span>Iniciar transmisi√≥n</span>
                    </button>
                    <button type="button" id="live-stop" class="secondary" disabled>
                      <span class="icon">‚èπ</span>
                      <span>Detener y guardar</span>
                    </button>
                    <button type="button" id="live-reset" class="ghost" disabled>
                      <span class="icon">üßπ</span>
                      <span>Descartar sesi√≥n</span>
                    </button>
                  </div>
                </div>

                <div class="live-stream-session">
                  <h3 class="live-panel-title">Sesi√≥n en curso</h3>
                  <div class="live-stream-status" id="live-stream-status" role="status" aria-live="polite">
                    Tu texto aparecer√° aqu√≠ cuando empieces a hablar.
                  </div>
                  <div id="live-stream-output" class="live-stream-output" aria-live="polite"></div>
                </div>
              </div>

              <div class="live-preview-panel">
                <div class="live-preview-header">
                  <h3 class="live-panel-title">Vista en vivo instant√°nea</h3>
                  <p class="live-panel-lead">Selecciona una transcripci√≥n para seguir el texto conforme llega cada segmento con auto-scroll.</p>
                </div>
                <div id="live-output" class="live-output" aria-live="polite">
                  Selecciona cualquier transcripci√≥n para previsualizarla aqu√≠.
                </div>
              </div>
            </section>
          </div>
        </div>
      </section>

      <section class="main-section" data-section="library" hidden>
        <section class="card span-2 folders-card" id="folders" aria-labelledby="folders-heading">
          <div class="card-header">
            <h2 id="folders-heading">Biblioteca por carpetas</h2>
            <p class="section-lead">Revisa tus carpetas ordenadas por fecha y filtra por tipo de contenido.</p>
          </div>
          <div id="system-alerts" class="system-alerts" hidden aria-live="polite"></div>
          <div class="folders-controls">
            <label class="control" for="folder-category">
              <span>Etiqueta</span>
              <select id="folder-category">
                <option value="all">Todas</option>
                <option value="temario">Temario</option>
                <option value="tema">Tema</option>
                <option value="practicas">Pr√°cticas</option>
                <option value="ejercicios">Ejercicios</option>
                <option value="teoria">Teor√≠a</option>
              </select>
            </label>
            <label class="control" for="folder-status">
              <span>Estado</span>
              <select id="folder-status">
                <option value="all">Todos</option>
                <option value="in-progress">En progreso</option>
                <option value="completed">Completadas</option>
                <option value="failed">Con error</option>
                <option value="premium">Premium</option>
              </select>
            </label>
            <label class="control" for="folder-topic">
              <span>N√∫mero de tema</span>
              <select id="folder-topic">
                <option value="all">Todos</option>
              </select>
            </label>
            <label class="control control--wide" for="folder-search">
              <span>Buscar carpeta, asignatura o etiqueta</span>
              <input id="folder-search" type="search" placeholder="Ej: historia, tema 3, teor√≠a" />
            </label>
            <button id="folder-reset" type="button" class="ghost">Limpiar filtros</button>
          </div>
          <div id="folder-groups" class="folder-groups" aria-live="polite"></div>
        </section>

        <section class="card metrics-card" aria-label="Resumen de actividad">
          <h2 class="visually-hidden">Resumen de actividad</h2>
          <div class="metrics-grid">
            <article class="metric">
              <p class="metric-label">Transcripciones</p>
              <p class="metric-value" data-metric="total">0</p>
              <p class="metric-sub">Historial total en la plataforma</p>
            </article>
            <article class="metric">
              <p class="metric-label">Completadas</p>
              <p class="metric-value" data-metric="completed">0</p>
              <p class="metric-sub">Listas para descargar</p>
            </article>
            <article class="metric">
              <p class="metric-label">En cola</p>
              <p class="metric-value" data-metric="processing">0</p>
              <p class="metric-sub">Proces√°ndose en tiempo real</p>
            </article>
            <article class="metric">
              <p class="metric-label">Premium &nbsp;|&nbsp; Minutos</p>
              <p class="metric-value metric-stack">
                <span data-metric="premium">0</span>
                <span data-metric="minutes">0 min</span>
              </p>
              <p class="metric-sub">Clientes con IA + duraci√≥n agregada</p>
            </article>
          </div>
        </section>

        <section class="card" id="recientes">
          <div class="list-header">
            <h2>Transcripciones recientes</h2>
            <input id="search" type="search" placeholder="Buscar por texto, asignatura o estado" />
          </div>
          <div class="filters">
            <label><input type="checkbox" id="filter-premium" /> Solo premium</label>
          </div>
          <div id="transcription-list" class="transcription-list"></div>
        </section>
      </section>
      <section class="main-section" data-section="live" hidden>
        <section class="card span-2 live-info-card" aria-labelledby="live-info-heading">
          <div class="card-header">
            <h2 id="live-info-heading">Centro en vivo</h2>
            <p class="section-lead">Inicia tus sesiones desde Inicio y consulta aqu√≠ recursos y diagn√≥sticos adicionales.</p>
          </div>
          <ul class="live-info-list">
            <li><strong>Transcripci√≥n en l√≠nea</strong> ahora vive en la pesta√±a Inicio para que grabes y transcribas sin cambiar de vista.</li>
            <li>La <em>Vista en vivo instant√°nea</em> tambi√©n est√° en Inicio y mantiene el auto-scroll activo mientras llegan nuevos bloques.</li>
            <li>Si detectamos problemas con CUDA o el modelo, ver√°s avisos en la Biblioteca con los pasos sugeridos para solucionarlo.</li>
          </ul>
        </section>

        <section class="card span-2 student-card" id="student-web" aria-labelledby="student-heading">
          <div class="card-header">
            <h2 id="student-heading">Modo estudiante en web</h2>
            <p class="section-lead">Observa c√≥mo se ejecuta la edici√≥n ligera con anuncios y computaci√≥n local pensada para campus.</p>
          </div>
          <div class="student-controls">
            <button id="open-student-web" type="button" class="primary-alt">Abrir simulador independiente</button>
            <label class="toggle" for="student-follow">
              <input id="student-follow" type="checkbox" checked />
              <span>Sincronizar con la transcripci√≥n activa</span>
            </label>
          </div>
          <div id="student-web-preview" class="student-preview">
            <div class="student-preview__header">
              <span>Vista previa incrustada</span>
              <span class="badge">Plan estudiante</span>
            </div>
            <div id="student-preview-body" class="student-preview__body" aria-live="polite">
              <p class="placeholder">Se vincular√° autom√°ticamente a la transcripci√≥n que est√© en proceso.</p>
            </div>
          </div>
        </section>
      </section>
      <section class="main-section" data-section="benefits" hidden>
        <section class="card" id="planes">
          <div class="list-header">
            <h2>Beneficios premium</h2>
            <button id="refresh-plans" type="button" class="ghost">Actualizar</button>
          </div>
          <p class="section-lead">Desbloquea notas IA, res√∫menes estructurados y recordatorios inteligentes en cada transcripci√≥n.</p>
          <div id="plans" class="plans"></div>
          <div id="checkout-status" class="checkout-status" aria-live="polite"></div>
        </section>

        <section class="card span-2 about-card" id="about">
          <div class="card-header">
            <h2>Sobre m√≠</h2>
            <p class="section-lead">Hola, soy FERIA. Construyo herramientas que convierten tus grabaciones en apuntes claros y accionables.</p>
          </div>
          <div class="about-grid">
            <article>
              <h3>Visi√≥n</h3>
              <p>Facilitar que estudiantes y profesionales capturen ideas sin preocuparse por el teclado. La aplicaci√≥n detecta ponentes, resume y prepara notas premium listas para compartir.</p>
            </article>
            <article>
              <h3>Funcionalidades destacadas</h3>
              <ul>
                <li>Diarizaci√≥n por voz con WhisperX optimizado para GPU.</li>
                <li>Notas premium generadas autom√°ticamente en segundos.</li>
                <li>Panel visual con m√©tricas animadas y vista estilo ChatGPT.</li>
              </ul>
            </article>
            <article>
              <h3>Pr√≥ximos pasos</h3>
              <p>Integrar recordatorios inteligentes, exportaci√≥n a Notion y compatibilidad con m√°s idiomas. Tus sugerencias son bienvenidas.</p>
            </article>
          </div>
        </section>
      </section>
    </main>

    <template id="transcription-template">
      <article class="transcription">
        <header>
          <h3 class="transcription-title"></h3>
          <span class="status"></span>
        </header>
        <p class="meta"></p>
        <p class="excerpt"></p>
        <div class="progress-track card-progress" hidden>
          <div class="progress-bar"></div>
        </div>
        <div class="premium" hidden>
          <strong>Notas premium:</strong>
          <p class="premium-notes"></p>
        </div>
        <div class="actions">
          <a class="download" href="#" target="_blank" rel="noopener">Descargar TXT</a>
          <button class="view">Ver detalles</button>
          <details class="more-actions">
            <summary>M√°s opciones</summary>
            <div class="more-actions__content">
              <button class="delete" data-id="">Eliminar</button>
              <button class="checkout ghost" data-id="">Activar premium</button>
            </div>
          </details>
        </div>
        <details class="speakers">
          <summary>Hablantes detectados</summary>
          <ul></ul>
        </details>
        <details class="debug-events" hidden>
          <summary>Eventos t√©cnicos</summary>
          <ul></ul>
        </details>
      </article>
    </template>

    <div id="modal" class="modal" hidden>
      <div class="modal-content">
        <button id="modal-close" aria-label="Cerrar">√ó</button>
        <pre id="modal-text"></pre>
        <div class="modal-actions">
          <button id="copy-transcript" type="button" class="ghost">Copiar al portapapeles</button>
        </div>
      </div>
    </div>

    <script src="app.js" type="module"></script>
    <footer class="app-footer">
      <p>¬© 2024 FERIA ¬∑ Creado con cari√±o para acelerar tus apuntes</p>
    </footer>
  </body>
</html>
